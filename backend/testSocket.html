<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Socket.io Test</title>
    <!-- Include the Socket.io client library -->
    <script src="https://cdn.socket.io/4.5.1/socket.io.min.js"></script>
  </head>
  <body>
    <h1>Socket.io Client Test</h1>
    <p>Open your browser's console to view logs.</p>

    <script>
      // Connect to your backend Socket.io server.
      // Make sure to replace the URL if your server is running on a different host or port.
      const socket = io("http://localhost:5001");

      socket.on("connect", () => {
        console.log("Connected with ID:", socket.id);

        // Emit a join event to simulate joining a note room.
        socket.emit("joinNote", { noteId: "test-note-1", user: "TestUser" });
      });

      // Listen for user join notifications.
      socket.on("userJoined", (data) => {
        console.log("User joined:", data);
      });

      // Listen for note updates.
      socket.on("noteUpdated", (data) => {
        console.log("Note updated:", data);
      });

      // After 5 seconds, simulate a note update.
      setTimeout(() => {
        socket.emit("noteUpdate", {
          noteId: "test-note-1",
          content: "Hello World!",
          user: "TestUser",
        });
      }, 5000);

      // Optional: Leave the note after 10 seconds.
      setTimeout(() => {
        socket.emit("leaveNote", { noteId: "test-note-1", user: "TestUser" });
        console.log("Left the note.");
      }, 10000);
    </script>
  </body>
</html>
